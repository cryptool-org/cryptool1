% $Id$
% ............................................................................
%        MAIN or STARTING Datei für dieses Dokument
%
% Comments: - Add (lengthy) comment only into this German version!
%           - Kommentare, die sich NICHT NUR auf die englische Version beziehen,
%             nur in die deutschen TeX-Dateien.
%
% Grammatik dt.: - der Algorithmus; Genitiv: des Algorithmus
%                  (http://www.duden.de/rechtschreibung/Algorithmus)
%                - der Logarithmus; Genitiv: des Logarithmus
%                - der Prozess; Genitiv: des Prozesses (http://www.duden.de/rechtschreibung/Prozess)
%
% Rechtschreibung dt: - eine abelsche Gruppe  --> "abelsche" klein.
%                     - eine Boolesche Funktion --> bisher immer groß [passt das zu Abel?]
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%
% Housekeeping:
% - Use  %-%-%-%-%-%-%  TEST_CURRENT  %-%-%-%-%-%-%-%  as long as working on a current problem.
% be_2016-07-13: - Blank am Ende weg: " \\\" --> "\\" done all files (d+E).
% be_2016-07-16: - Trennung unterbinden:
%                  "CT 2" --> "CT2" done all files (d+E)
%                  "CrypTool 2" --> "CrypTool~2" done all files (d+E)
%                  [ Abstandsmäßig etwas enger wäre: "CrypTool 2" --> "CrypTool\,2" ]
%                  Analog für CrypTool 1  done (d+E).
% be_2016-07-18: - If implemented: CT2 and JCT mentioned as well as CT1.
% be_2016-07-20: - Consistent names for chapter labels and hypertargets, all start with "Chapter_"
%
%
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%
% Remark concerning LaTeX:
% 1) Appearing of black boxes: They are only created if you have the draft option set.
%    \documentclass[11pt,a4paper,draft]{report}
%                                ^^^^^
%    It will leave if you delete this - and just appear as a warning in texfile.log
%    such as  Overfull \hbox (38.36009pt too wide)  in paragraph at lines 16--30
% 2) Black boxes kamen auch nach Einfügen der Referenzen:
%    http://tex.stackexchange.com/questions/171999/overfull-hbox-in-biblatex
%    --> Load \usepackage[final]{microtype}
%        or try  \emergencystretch=1em  or try  \begin{tolerant}{3000}
% 3) 
%    
%    
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%
% Todos for later:
% 1) In code ifdefs machen, dass wenn draft (WO???) gesetzt, dass dann
%    Verschiedenes anders, aber automatisch:
%    - kleineres PDF für Cover
%    - \errorcontextlines=200  --> Erh. mehr Kontextinfo um auftretende Fehler herum.
%    - \tracingstats=2 
%    - ...
% 2) Deutsche Erläuterungen in der englischen Bibliography durch englische Texte ersetzen,
%    wenn klar, wie das mit bibtex machbar ist!!!!!
%    Generelle Info: https://en.wikibooks.org/wiki/LaTeX/Bibliography_Management
%                    https://www.tug.org/TUGboat/tb30-1/tb94mori.pdf
%                    http://mirror.unl.edu/ctan/biblio/bibtex/contrib/babelbib/babelbib.pdf
% 3) bibtex durch biblatex ersetzen ?
%    Dürfte aber viele Problem machen, denn laut Doc zu v3.4 in
%    http://tug.ctan.org/macros/latex/exptl/biblatex/doc/biblatex.pdf
%    sind viele Packages wie babelbib und bibunits damit nicht kompatibel,
%    und die nutze ich momentan w/ der Verzeichnisse.
%    
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

\documentclass[a4paper,11pt,oneside,ngerman]{book}
\overfullrule=5pt % uncomment to mark overfull boxes
\usepackage[latin1]{inputenc} % Umlaute  %%BERM2: Added for bitciphers.tex (necessary any more?)
%%% \usepackage[utf8]{inputenc}   % Alternative?
\usepackage[ngerman]{babel} % ngerman (für neue dt. Rechtschreibung) geht nur, wenn auch bei documentclass gesetzt.
                            % Steht bei documentclass keine Sprache, geht hier nur german.
%\usepackage[T1]{fontenc} %BERM2: bitciphers.tex used T1.
                          % Ohne T1 wurden dort \dh und \textperthousand nicht erkannt.
                          % Die Hinzunahme von T1 (soll eigentlich Umbrüche verbessern),
                          % erzeugt aber ein paar zusätzliche schwarze Balken (z.B. bei
                          % "Der DES-Algorithmus ist" in cryptomethods.text im Deutschen,
                          % und bei der Trennung von "straddling checker-board" in 2.2.1 im Englischen.
% Statt T1 als Package zu inkludieren, nur die wirklich benötigten Sonderzeichen definiert.
\DeclareTextSymbolDefault{\dh}{T1}
\DeclareTextSymbolDefault{\textperthousand}{T1}

%%% Remark: Wenn man biblatex nutzt, darf man nicht mehr nutzen / braucht man kein babelbib mehr !!!
%%%         Siehe: http://tex.stackexchange.com/questions/219203/how-to-use-babelbib
%%%   It is really much easier to do this in biblatex (and you can use the natbib option
%%%   and use command like \citep). babelbib and natbib aren't compatible.
%%% --> Ich sah erst keinerlei Effekt in der Bibliography!
%%% --> Als ich babalpha nahm, kompilierte es nicht mehr wegen {Evaluating Logarithms in GF(2\verb|^|n)}
%%%     Fügte $-Klammer drumherum, was wahrscheinlich eh korrekter. 5.8.16
\usepackage[fixlanguage]{babelbib} % Im D per bibtex erzeugte Bibliography statt editors -> Herausgeber, 
                                   % bei edition aus "1" eine "1." (ohne babelbib im Englischen "1" unverändert).
                                   % Leider macht es aus Mar nicht März
\selectbiblanguage{ngerman}
%% \bibliographystyle{babplain}
%%% \bibliography{../de/references.bib}  %% Evtl. hier EINMAL setzen, statt in jedem \putbib[../de/references]


% \usepackage{geometry} %%%% 1.1.17: Added to make right border smaller for page with menutree only // Wieder raus, da danach li. Rand zu groß! Müsste wohl alles gleich zu Beginn hier setzen.
% \geometry{a4paper, left=2.7cm, right=2.7cm, top=2.5cm, bottom=2.2cm}
% \setlength{\footskip}{2cm}
% \geometry{bottom=3.2cm}
% \usepackage{caption}  %%%% 1.1.17: Added to enlarge distance between menutree figure and its caption a bit // Wieder raus: nutzte \abovecaptionskip statt caption package.
%ENGLISH \usepackage{geometry} % To make right border smaller (used only for page with menutree)


\usepackage{morewrites}% Neu wegen "message {No room for a new \string #" nach Hinzufügen von \lostof{opensslcode}

\usepackage{datetime} % To distinguish often compiled draft versions
% \usepackage[dvips]{graphics}
% \usepackage{graphicx}

\usepackage{amsmath}
\usepackage{amssymb,amscd,latexsym}   %BERM2: added for biciphers.tex
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{ae}% Neu wegen dlog.tex
\usepackage{color}   %BERM2: added for biciphers.tex
\usepackage{wrapfig}%16xxxxxxxxxxxxxx WIRKLICH NOETIG?

\usepackage{tikz,tikz-cd} %16xxxxxxxxxxxxxx WIRKLICH NOETIG?
\usepackage{fancybox} %16xxxxxxxxxxxxxx

\usepackage{fancyvrb}
\usepackage{makeidx}  % Alternativ evtl. \usepackage{imakeidx} (bemerkte keinen Unterschied) --> Alphabetheader wahrscheinlich möglich!
%16xxxxxxxxxxxxxx \usepackage[pdftex]{graphicx} %% RAUS wegen Option clash for package graphicx.
\usepackage{pdfpages}   % SR_2009: added new cover
%\usepackage{enumitem} %BE_2012: eliminate space after end{itemize}  Did NOT work!
%                      %BE_2016: So sollte er topsep, partopsep, itemsep und nolistsep kennen. Did NOT work!
%  Trotz http://tex.stackexchange.com/questions/119919/no-spacing-between-enumerated-items-with-usepackageenumerate
%      (enthält Beispiel für Multiple Choice Quizz)
%  See also: http://www.troubleshooters.com/linux/lyx/ownlists.htm +++
\usepackage{paralist}  %BE_2012: eliminate space after end{itemize} worked with compactitem
\usepackage{arydshln} %BE_Jan2013: To use hdashline
\usepackage{verse}    %BE_Feb2013: To use \settowidth{\versewidth}{xxx}


%\usepackage{myThanks}
%\usepackage{thumbpdf}
%\usepackage[T1]{fontenc}
%\usepackage{times}
%\usepackage{pslatex}
%\usepackage{ae,aecompl}

% Formatierung der Fußnoten
\usepackage[flushmargin]{footmisc}
\usepackage{fullpage}

% Rahmen um Boxen, die auch mehrzeilig sein können (siehe Euler-Phi-Def.)
% \usepackage{framed}  %% Nicht gebraucht, da man dafür auch \parbox innerhalb von \fbox aufrufen kann.

\usepackage[hyphens]{url} % options "hyphens" enables linebreaks nach Bindestrich in \url{}
                          % (evtl. usepackage url erst NACH usepackage hyperref?)
\appto\UrlBreaks{\do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j
\do\k\do\l\do\m\do\n\do\o\do\p\do\q\do\r\do\s\do\t\do\u\do\v\do\w
\do\x\do\y\do\z}
% Trennung in langen URLs nach jedem Kleinbuchstaben möglich (braucht manchmal zusätzlich sloopypar).
% Vgl http://tex.stackexchange.com/questions/3033/forcing-linebreaks-in-url  und \def\UrlBigBreaks{\do\/\do-\do:}
%
% http://tex.stackexchange.com/questions/241343/what-is-the-meaning-of-fussy-sloppy-emergencystretch-tolerance-hbadness
% --> use \sloppy
% http://golatex.de/silbentrennung-letzter-ausweg-sloppypar-t3535.html
% --> evtl. bessere Alternativen:
%        \begin{sloppypar}    ...   \end{sloppypar}
%     oder
%        \usepackage{microtype} %Sorgt für bessere Platzausnutzung der \hbox bei Umbrüchen
%        \setlength{\emergencystretch}{1em} %Sorgt für bessere Platzausnutzung der \hbox bei Umbrüchen
% 
% \usepackage{breakurl}  %BE_2016Jul: War nicht nötig!
% http://www.undertec.de/blog/2011/10/latexbibtex-zeilenumbruch-in-url.html
% Wer in seinem Literaturverzeichnis eine Quellenangabe auf eine Webseite
% mit "\url{}" %setzt, kann Probleme mit dem Zeilenumbruch bekommen.
% Um dieses Problem zu beseitigen, bindet man das Paket "breakurl" nach dem
% Paket "hyperref" mit "\usepackage{...}" ein. Nun kann man ohne Probleme
% den "\url{}"-Befehl in einem BibTeX-File verwenden und erhält einen
% Zeilenumbruch in der Url, ohne dass die Möglichkeit in PDF-Dokumenten
% verloren geht, den Link direkt auszuführen.



% Literaturverzeichnis kapitelweise
%%% \usepackage[labelstoglobalaux]{bibunits} % ohne labelstoglobalaux scheint man thebibilography und bibtex nicht mischen zu können
%xy%%_17-01-19: Option sectionbib might lower the size of the headline
\usepackage[]{bibunits} %xy%%_17-01-19: Removing option labelstoglobalaux saved 400 "multiply defined references"

\defaultbibliography{references}
%%%NEWNEW \xxxdefaultbibliographystyle{abbrv}



\usepackage{float}
\usepackage{subfig}
\usepackage{shorttoc}

% First \textperthousand was used for the promille symbol in bitcipers.tex.
% As a black box appeared after a %, I tried \usepackage{textcomp}.
% However, then 2 warnings cam eup at \copyright: 
%   script-de.tex --- 326
%   LaTeX Font Warning: Font shape `TS1/aer/m/n' undefined using `TS1/cmr/m/n' instead
%                       for symbol `textcopyright' on input line 326.
% Info:
% \textperthousand only works in text mode, not in math mode.
% \permil from the package wasysym, works in both text mode as in math mode.
\usepackage{wasysym}%Necessary for promille symbol in bitcipers.tex

\usepackage{eurosym}%Necessary for € symbol in bitcipers.tex



% -------------
%BE_2016Jun: %% be_todo: To use \StrSubstitute{abcde}{d}{D}  (together with hyperref)  WARUM nur im DEUTSCHEN?
% \usepackage{xstring,xifthen}
\usepackage{xstring}
%To reduce the number of hyperlink related 'pdfTeX warning's we use options 
% pdfpagelabels, plainpages=false and, hyperfootnotes=false,
% and place hyperref after float and after mykeidx!
%Option debug helps finding problems.

%BE_2016Jun: %% be_todo -- 3. Versuch: nameref erst einer Variablen zuweisen und diese dann um // strippen.


%BE_2016Jun: %% be_todo -- 2. Versuch: Nach \usepackage{hyperref}
% \usepackage{nameref}% loads gettitlestring
% \GetTitleStringSetup{expand} % Default way would be without expansion.


%BE_2016Jun: %% be_todo -- 1. Versuch: TUT noch nicht:
%https://viaverdepaisagismo.com.br/index.cgi/ar/00/http/tex.stackexchange.com/questions/296643/how-to-use-nameref-with-xstring-package-to-check-string-length
% http://tex.stackexchange.com/questions/178610/replacing-substrings-by-linebreaks
% Within \StrSubstitute or \StrLen we need an expandable version of \nameref (%BE_2016Jun):
\makeatletter
% \newcommand\@namedisablecommands{}
% \newcommand{\addnamedisablecommand}[1]{%
\newcommand{\getnamereftext}[1]{%
  \@ifundefined{r@#1}{}{%
    \unexpanded\expandafter\expandafter\expandafter{%
      \expandafter\expandafter\expandafter\@thirdoffive\csname r@#1\endcsname
    }%
  }%
}
\makeatother


% !!! --------------------------------------------------------------------------  !!!!!!!!!!!!!!!!!!
% !!! http://tex.stackexchange.com/questions/58469/why-are-listof-and-listoffigures-styled-differently
% !!! BEACHTE: Several problems can be avoided, if hyperref is the last package leoaded !!!!!!!!!!!!
%              (Vorher hatte ich es direkt nach \usepackage{xstring} )
% \usepackage[dvipdfm, colorlinks=true, bookmarksopen=true, bookmarksopenlevel=4, breaklinks=true, pdfstartview=Fit, linkcolor=blue]{hyperref}
% \usepackage[colorlinks=true,linkcolor=black,citecolor=black,urlcolor=black,bookmarksnumbered=true,pdfpagelabels,plainpages=false,hyperfootnotes=false]{hyperref}
%% https://www.apfeltalk.de/community/threads/latex-hyperref-ja-aber-bitte-ohne-rahmen.82217/
%16xxxxxxxxxxxxxx In dlog.tex war: \usepackage{hyperref,cite,url}  Bedeutung der Syntax?

\usepackage[colorlinks=true,linkcolor=blue,citecolor=blue,urlcolor=black,bookmarksnumbered=true,pdfpagelabels,plainpages=false,hyperfootnotes=false]{hyperref}



\floatstyle{boxed}  % This is necessary to have borders around the Zitate.
                    % After the ctsquote def overruled by \floatstyle{ruled} ?
\newfloat{ctsquotefloat}{H}{loq}   % ctsQuotes-from-Books, List-of-Quotes
\floatname{ctsquotefloat}{Zitat}   % ctsQuotes with centering
\newenvironment{ctsquote}{\begin{ctsquotefloat}\center}{\end{ctsquotefloat}}
\floatstyle{ruled}

\newfloat{sagecode}{!ht}{loc}[chapter]
\floatname{sagecode}{SageMath-Beispiel}

% With  "\newfloat{opensslcode}{!ht}{loc}[chapter]"  both Verzeichnisse of sagecode and opensslcode contained
% all entries --> It's important to add a new extension name (where the temp info is collected) per list type!!!
% Statt loc wie bei sagecode, dann bspw. loo oder loos verwenden.
\newfloat{opensslcode}{!ht}{loos}[chapter]
\floatname{opensslcode}{OpenSSL-Beispiel}

\newfloat{cryptoprocedure}{!ht}{lop}[chapter]
\floatname{cryptoprocedure}{Krypto-Verfahren}


\RequirePackage[normalem]{ulem} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\RequirePackage{color}\definecolor{RED}{rgb}{1,0,0}\definecolor{BLUE}{rgb}{0,0,1} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFadd}[1]{{\protect\color{blue}\uwave{#1}}} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFdel}[1]{{\protect\color{red}\sout{#1}}}                      %DIF PREAMBLE%16xxxxxxxxxxxxxx

\providecommand{\DIFaddbegin}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFaddend}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFdelbegin}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFdelend}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx

\providecommand{\DIFaddFL}[1]{\DIFadd{#1}} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFdelFL}[1]{\DIFdel{#1}} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFaddbeginFL}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFaddendFL}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFdelbeginFL}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFdelendFL}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx


\usepackage{ragged2e} % be_2016-08-04: ragged margin with hyphenation w/ blackbox in index
\makeindex
% \makeindex[columns=3, title=Alphabetical Index] %%% TodoTodo_Nice-to-have-only: Alphabetzeichen als Header im Index. Tat nicht! --> Siehe usepackage{imakeidx}
\hypersetup{colorlinks=true}

%\newlength{\myFootnoteWidth}
%\newlength{\myFootnoteLabel}
%\setlength{\myFootnoteLabel}{2.2em}%  <-- can be changed to any valid value

% \setlength{\textwidth}{460 pt}
% \hoffset-0.7in
\newtheorem{definition}{Definition}[section]
\newtheorem{satz}{Satz}[section]
\renewenvironment{proof}[1]{\noindent\textbf{Beweis #1} \\}{\hfill$\Box$\par}
\newenvironment{Beweis}[1]{\noindent\textbf{Beweis #1} \\}{\hfill$\Box$\par}
\newenvironment{example}[1]{\noindent\textbf{Beispiel#1}}{}
\newenvironment{remark}[1]{\noindent\textbf{Bemerkung#1}}{}

% \newenvironment{ Latex_Create-Closed-Dummy-Environ }{beg09asas} {endasas}
% \begin{ Latex_Create-Closed-Dummy-Environ }
%	TR (this line can be omitted!)
% \end{ Latex_Create-Closed-Dummy-Environ }
% OUTPUT: beg09asas TR endasas
% The commands which don't effect anything outside the environment have to be between begin and end.
% -- analog zu
% \newenvironment{ dummerspruch }[1]{#1 sagt: \begin{quote}}{\end{quote}}
% \begin{ dummerspruch }[ Gollum ]
% My precioussss !
% \end{ dummerspruch }
\newenvironment{ Latex_Create-Closed-Dummy-Environ }{}{}

\setcounter{tocdepth}{4}    % Das Inhaltsverzeichnis wird vier Ebenen tief (Default ist 3)
\setcounter{secnumdepth}{4} % Nummerierung auch bei subsubsection

%\pdfinfo{ /Title (CrypTool-Skript) /Creator (TeX) /Producer
%(pdfTeX 0.14a) /Author /CreationDate
%(D:20000920201000) } ???????????????




% Define title ......................
% \title{ % Keine Leerzeilen, sonst Meldung: "Paragraph ended before \title was complete."
%\title{\vspace{25pt}%SO bekam ich leider VOR dem Titel keinen Abstand nach oben
\title{%
% be_Wished to enlarge only the main title, however \HUGE not available,
%    or \HUGE without any effect beside adding \usepackage[11pt]{moresize}
%    and explicit use of \fontsize caused the LaTeX Font Warning:
%    Font shape `OT1/cmr/m/n' in size <40> not available size <24.88> substituted on input line 130.
%    {\usefont{\encodingdefault}{\rmdefault}{b}{n}%
%     \fontsize{40}{48} \selectfont Das CrypTool-Buch}
%    {\fontsize{40}{48} \selectfont Das CrypTool-Buch} \\[15pt]
%    {\HUGE Das CrypTool-Buch} \\[15pt]
% --> Später: Use the KOMA-script class or the memoir class (erfordert aber andere \documentclass)
%    http://texblog.org/2012/08/29/changing-the-font-size-in-latex/
%	{\Huge ~ \\[20pt]%NUR SO bekam ich VOR dem Titel noch etwas mehr Abstand nach oben
% 	       Das CrypTool-Buch:\\[20pt]
	{\Huge Das CrypTool-Buch:\\[20pt]
	       {\bf Kryptographie lernen und anwenden\\[15pt]
                mit CrypTool und SageMath}} \\[35pt]
	{\LARGE Hintergrundmaterial und Zusatzinformationen\\
	 zum freien E-Learning Krypto-Programm CrypTool\\[5pt]
	 (Kryptographie, Mathematik und mehr)} \\[35pt]
	%{\large 12. Auflage}
	 {\large 12. Auflage --  {\bf Draft-Version} (\settimeformat{hhmmsstime}\currenttime)}
        \vspace{150pt}
	% War der \vspace-Wert zu groß (z.B. 180), kam nach dem Cover eine
	% komplett leere Seite und auf der von \maketitle erstellten 3. Seite
	% stand die Seitennummer II ?
	% Zusätzlich stand auf der Seite "Dies ist ein freies ..." wieder eine
	% römische I ?  D.h. er begann zweimal von vorne!
}

\author{% Die Klammer zur Fontänderung funktioniert bei \author nur einzeilig im Gegensatz zu \title?!
	{\LARGE Prof.\ Bernhard Esslinger (Mitautor und Herausgeber)}\\[10pt]
	{\LARGE und das CrypTool-Team, 1998-2017}\\[10pt]
%	{\LARGE Frankfurt am Main}\\*[15pt]
	\url{www.cryptool.org}
}




% Purer Versuch, zweisprachige note-Items zu haben, die je nach Sprache umbenannt.
% ===============================================================================
% --> Per bibtex läuft das unter Annotated Bibliography.
%   ... language=xxx" (xxx, usenglish, english, german, ngerman, ... ) 
%
% --> Weitere Möglichkeiten, leider nur per biblatex (nicht per bibtex):
% \AtEveryBibitem{%
%   \clearfield{note}%
% }
% 
% \savefield{<field>}{<macro>}
% \savefield*{<field>}{<macro>}
%   Copies an unformatted<field>to a<macro>. The regular variant of this command defines the
%   <macro> globally, the starred one works locally.
% 
% \restorefield{<field>}{<macro>}
%   Restores a<field>from a<macro>defined with\savefield before. The field is
%   restored within a local scope.
%
% Andere Idee, aber auch mit biblatex:
% http://tex.stackexchange.com/questions/166739/main-text-and-bibliography-in-two-languages-but-with-alternate-date-format







%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

% \includegraphics[width=\paperheight]{figures/coverv1deQual90.jpg}  % 1. Seite leer, 2. zeigt Grafik nicht ganz und hat Seitennummer!
% \include[pages=1]{figures/coverv1deQual90.jpg}  % 1. Seite leer. Nur Dateiname steht da.
% \includepdf[pages=1]{figures/coverv1_de_draft.pdf}  % 100dpi (kein Draftbalken mehr, nur geringere Auflösung)
% \includepdf[pages=1]{figures/coverv1_de.pdf}        % 300dpi (wieder pdf statt png)
\includepdf[pages=1]{figures/coverv1_de.pdf}        % ab 2017 nur eine Auflösung und kein Querbalken

\pagestyle{plain}
%16xxxxxxxxxxxxxxERSTMAL weggelassen \pagestyle{myheadings}
\tikzset{ampersand replacement=\&} %DIF > %16xxxxxxxxxxxxxx

\setlength{\fboxrule}{.5mm}
\setlength{\fboxsep}{1.75mm}
\setlength{\footnotesep}{6pt}
\addtolength{\footskip}{8pt}
% \setlength{\footskip}{4cm}

\VerbatimFootnotes
% space between text and footnote 
% \renewcommand{\footnoterule}{\parindent0cm\rule{13cm}{.1pt}\vspace{.2cm}}
% Formatierung der Fußnoten
\renewcommand\footnoterule{
\vspace{2em}%   <-- one line space between text and footnoterule
% \kern-3\p@
\hrule width .4\columnwidth
\vspace{4pt}
% kern 2.6\p@
}

%\long\def\@makefntext#1{%
%\parindent 1em%
%\noindent
%\hbox to 1.8em{\hss\@makefnmark}#1}


\frontmatter % Ab hier beginnt Seitennummerierung mit römischen Ziffern
\maketitle


% Vergleichbar zur Nutzung von Texten aus der Wikipedia (=GNU Free Documentation Licence, GFDL)
\begin{quote}
Dies ist ein freies Dokument, d.h. Inhalte des Dokuments können kopiert und
verbreitet werden, auch zu kommerziellen Zwecken. \\
Im Gegenzug sind Autor, Titel und die CrypTool-Webseite (\url{www.cryptool.org}) zu
nennen. Selbstverständlich darf aus dem CrypTool-Buch, genau wie aus jedem
anderen Werk auch, zitiert werden. \\
Darüber hinaus unterliegt dieses Dokument der GNU-Lizenz für freie
Dokumentation.

%   Copyright \textcopyright{} 1998--2017 Bernhard Esslinger and the    %% Geht beides.
    Copyright \copyright{} 1998--2017 Bernhard Esslinger and the
    CrypTool Team. Permission is granted to copy,
    distribute and/or modify this document under the terms of the GNU
    Free Documentation License, Version 1.3 or any later version
    published by the Free Software Foundation. A copy of
    the license is included in the section entitled
    \hyperlink{appendix-GNU-fdl}{``GNU Free Documentation License''}.

    Dies beinhaltet auch den Code für die SageMath-Beispiele in diesem Dokument.
\end{quote}




\vspace{70pt}\noindent Zum Referenzieren per bibtex:
% Referenzart: book
% Notwendige Felder: author oder editor, title, publisher, year
% Optionale Felder: volume oder number, series, address, edition, month, note, isbn
\begin{Verbatim}%
[fontsize=\footnotesize]
@book{Esslinger:ctb_2017,
  editor    = {Bernhard Esslinger},
  title     = {{D}as {C}ryp{T}ool-{B}uch: {K}ryptographie lernen
               und anwenden mit {C}ryp{T}ool und {S}age{M}ath},
  publisher = {CrypTool-Projekt},
  edition   = {12},
  year      = {2017}
}
\end{Verbatim}
% 
% https://de.wikibooks.org/wiki/LaTeX-Kompendium:_Zitieren_mit_BibTeX
% https://de.wikipedia.org/wiki/BibTeX
% http://jabref.sourceforge.net/help/de/BibtexHelp.php
% 
% Vgl. auch bei Wikipedia: https://de.wikipedia.org/wiki/Vorlage:Cite_journal




\vspace{240pt}
\noindent
Quelle Coverfoto: \url{www.photocase.com}, Andre Günther\\
Schriftsatz-Software: \LaTeX\\
Versionsverwaltungs-Software: Subversion


% be_2005: a) Auf erste Seite nur den Titel ! -> Newpage eingefügt.
%          b) "overviewcontent.tex" hier und nicht unten vor "introduction.tex"
%             einfügen, damit es VOR dem Inhaltsverzeichnis steht.
\input{chapters/overviewcontent.tex} % Überblick über den Inhalt des CT-Buches


\newpage
\pdfbookmark[0]{Kurzinhaltsverzeichnis}{ShortContents}
\shorttoc{Kurzinhaltsverzeichnis}{0}
\clearpage\phantomsection
\pdfbookmark[0]{\contentsname}{Contents}
\tableofcontents

\newpage
\normalsize

% \parindent 0cm
% \parskip 4pt
% Setting the default for the vertical distance before a paragraph as distinguished variable
\newcounter{mycounterDefaultParskip}
\setcounter{mycounterDefaultParskip}{4}
\parskip \value{mycounterDefaultParskip} pt 




% Die Datei references.bib steht nur einmal (!) in trunk\script\de (gilt also auch für trunk\script\en).

%%% Bisher: Bibliography einmal hier erzeugt und in den einzelnen Tex-Files nur die Ausgabe aufgerufen.
%%% Ziel: Will am Ende eine 2. Gesamt-Bibliography-Ausgabe, aber mit anderem Style (!),
%%%       und überall sollen die automatisch erzeugten alpha-Referenzen im Text angezeigt werden.
%%% Bem.: Hier sollen also nur die tex-Files der Kapitel geladen und dort die bibliography behandelt werden.
%%%       Das geht nur, wenn man das \begin{bibunit}[plain] und \end{bibunit} jeweils auch dort
%%%       am File-Beg. und -Ende hat. Macht man das hier um jede Datei herum, wird es unübersichtlich.
%%%       Alternativ hätte ich es wohl auch mit biblatex probieren können.
% - http://tex.stackexchange.com/questions/98660/two-bibliographies-one-for-main-text-and-one-for-appendix
% - http://tex.stackexchange.com/questions/10104/two-bibliographies-with-two-different-styles-in-the-same-document
% - http://tex.stackexchange.com/questions/44589/how-to-split-bibliography-for-different-sections
% - http://www.matthiaspospiech.de/files/latex/vortrag/VortragBibtexBiblatexBiber.pdf  +++

%%%x  \bibliographyunit[\chapter] % \bibliographyunit mit [chapter] leite units weise ein; ohne Arg. wieder normal.

% Stern hier vor der {...}, da dies nur den Style in der local units festlegt und nur dafür Infos generiert. 
%%%x  \bibliography*{references}
%%%x  \bibliographystyle*{plain}
%xxx Das war vorher in dlog-factoringdead.text am Ende, bevor nach refrences.bib
%xxx \def\shortbib{0}
%xxx \bibliographystyle{abbrv}
%xxx \bibliography{./../en/bib-dfd}% Annahme: bin in "de" (nicht in "de\chapters")

%xy%%_17-01-19: Introduced LaTeX variable CTBChapName to have a specific headline for the chapter bibliography
\renewcommand{\bibname}{Literaturverzeichnis \CTBChapName{}}  %xy%%_17-01-19:
\newcommand{\CTBChapName}{(Intro)}           \input{chapters/introduction.tex} % Working together of Book and Programm 
\mainmatter % Ab hier beginnt Seitennummerierung mit arabischen Ziffern
\renewcommand{\CTBChapName}{(CryptoMeth)}    \input{chapters/cryptomethods.tex}
\renewcommand{\CTBChapName}{(Kap. PaP)}      \input{chapters/paper_and_pencil.tex}
\renewcommand{\CTBChapName}{(Kap. Primes)}   \input{chapters/primes.tex}
\renewcommand{\CTBChapName}{(Kap. NT)}       \input{chapters/numbertheory.tex}
\renewcommand{\CTBChapName}{(Kap. ModernCrypto)}  \input{chapters/moderncryptography.tex}
\renewcommand{\CTBChapName}{(Kap. DigSig)}   \input{chapters/digitalsignatures.tex}
\renewcommand{\CTBChapName}{(EllCurves)}     \input{chapters/ellipticcurves.tex}
\renewcommand{\CTBChapName}{(BitCiphers)}    \input{chapters/bitciphers.tex}
\renewcommand{\CTBChapName}{(Kap. HE)}       \input{chapters/homomorphicencryption.tex}
\renewcommand{\CTBChapName}{(DLogFact)}      \input{chapters/dlog-factoringdead.tex}
\renewcommand{\CTBChapName}{(Crypto2020)}    \input{chapters/crypto2020.tex}

\bibliographyunit   %%%%% Überhaupt nötig? Im ENGLISCHEN raus !



% ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\begin{appendix}
\newpage
\hypertarget{appendix-start}{}\label{s:appendix-start}
\chapter{Anhang}
    \begin{itemize}
      \item[1] \hyperlink{appendix-menu-overview-CT1}{CrypTool-1-Menübaum}
      \item[2] \hyperlink{appendix-template-overview-CT2}{CrypTool-2-Vorlagen}
      \item[3] \hyperlink{appendix-function-overview-JCT}{JCrypTool-Funktionen}
      \item[4] \hyperlink{appendix-function-overview-CTO}{CrypTool-Online-Funktionen}
      \item[5] \hyperlink{appendix-movies}{Filme und belletristische
                          Literatur mit Bezug zur Kryptographie}
      \item[6] \hyperlink{appendix-Learn-NT}
                         {Lernprogramm Elementare Zahlentheorie}
      \item[7] \hyperlink{appendix-using-sage}
                         {Kurzeinführung in das Computer-Algebra-System SageMath}
      \item[8] \hyperlink{appendix-authors}{Autoren des CrypTool-Buchs}
    \end{itemize}
  \renewcommand{\CTBChapName}{(Appendix\_Menus)}      \input{chapters/menus.tex}
  \renewcommand{\CTBChapName}{(Appendix\_LearnTool)}  \input{chapters/movies.tex}
  \renewcommand{\CTBChapName}{(Appendix\_Sage)}       \input{chapters/what-is-sage.tex}
  \renewcommand{\CTBChapName}{(Appendix\_Authors)}    \input{chapters/authors.tex}
\end{appendix}

\renewcommand{\CTBChapName}{(Appendix gnu-fdl)}      \input{chapters/gnu-fdl-1.3.tex}


% ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\begingroup
  % remove extra vertical space from \listoffigure and \listoftables so that 
  % it looks similar to \listof{sagecode}
  \setlength{\parskip}{0pt}  %% Im ENGLISCHEN -- Alternative ?: \renewcommand*{\addvspace}[1]{}

  \clearpage\phantomsection
  \addcontentsline{toc}{chapter}{\listfigurename}
  \listoffigures

  \clearpage\phantomsection
  \addcontentsline{toc}{chapter}{\listtablename}
  \listoftables

  \clearpage\phantomsection
  \addcontentsline{toc}{chapter}{Verzeichnis der Krypto-Verfahren mit Pseudocode}
  \listof{cryptoprocedure}{Verzeichnis der Krypto-Verfahren mit Pseudocode}
\endgroup


\clearpage\phantomsection
\addcontentsline{toc}{chapter}{Verzeichnis der Zitate}
\listof{ctsquotefloat}{Verzeichnis der Zitate}
\index{Zitate}
\label{sc:List-of-Quotes}


% Zur Fehlermeldung vgl https://www.ntg.nl/doc/fairbairns/newfaq.pdf, #228:
%                       Läuft mir damit eine Registerzahl über? Welche?
% http://tex.stackexchange.com/questions/289734/special-package-combination-gives-no-room-for-new-write:
% The solution was to use \usepackage{morewrites} since basically any of the packages already loaded
% there grabs at least one (write) file handle, but the number of file handles is restricted to
% 16 registers only, unless morewrites is loaded. 
 \clearpage\phantomsection%%% Zeile \listof verursachte den Error \e@ch@ck ...message {No room for a new \string #4}
 \addcontentsline{toc}{chapter}{Verzeichnis der OpenSSL-Beispiele}
 \listof{opensslcode}{Verzeichnis der OpenSSL-Beispiele}
 \index{OpenSSL!Beispiel}
 \label{sc:List-of-OpenSSL-Code-Examples}



\clearpage\phantomsection
\addcontentsline{toc}{chapter}{Verzeichnis der SageMath-Programmbeispiele}
\listof{sagecode}{Verzeichnis der SageMath-Programmbeispiele}
\index{SageMath!Programmbeispiele}
\label{sc:List-of-Sage-Code-Examples}
% \hypertarget{sc:List-of-Sa

\vspace{30pt}
\begin{itemize}
  \item Der Quellcode der SageMath-Beispiele in diesem Skript wird in Form von
        SageMath-Programmdatei"-en mit dem CT1-Setup-Programm ausgeliefert.
        Die Beispiele in einem Kapitel sind jeweils in einer Datei zusammen gefasst.\\
        Nach der Installation von CrypTool~1 \index{CT1} finden Sie
        die SageMath-Beispiele im Unterverzeichnis \verb#sagemath# in den folgenden
        4 Dateien:\\\\%%%% TODOTODO: more files: nicht nur CT1 --> evtl. nach Github !
        - SageMath-Samples-in-Chap01.sage \\
        - SageMath-Samples-in-Chap02.sage \\
        - SageMath-Samples-in-Chap03.sage \\
        - SageMath-Samples-in-Chap04.sage
  \item Alle Beispiel wurden mit der SageMath-Version 5.3 (Release Date 2012-09-08) getestet.
\end{itemize}   % xxxxxxxxxxxxxx Weitere Beispiele ergänzen !  % TODOTODO: Update.





%------------------------------------------------------------------------------
%%% Fassung vor Einführung von \begin{bibunit}:
%%% \xxnocite{*}  % Um ALLE Referenzen in einer Bibliography am Ende auszugeben (nicht nur die zitierten)
%%% \xxbibliographystyle{plain}  % Dieser Befehl ist nötig!
%%% \xxrenewcommand{\bibname}{References of All Chapters}  % Change title at page, not the contents entry.
%%% \xxbibliography{../de/references} % WICHTIG: Kein * vor der {...}
%%% \xxaddcontentsline{toc}{chapter}{Bibliography of All Chapters}  % section, chapter oder * legen nur
                                % die Gliederungsebene fest für die Ausgabe im Inhaltsverzeichnis.

%% Zum Style:
%% Im Quelltext darf nur eine Nummer stehen. Hat man zwei Nummern (hier am Ende und direkt
%% nach dem Kapitel), ist die Referenz im Text nicht mehr eindeutig. Im Text wird immer die
%% Referenz des letzten Bibliography-Aufrufs genommen, hier also vom "alpha"-Style.
%% Die Nummerierung in der 2. Gesamt-Bibliography hier gilt also nur als Aufzählung.


%%% TESTTEST Die erste der beiden Gesamt-Bibliotheken kann man während der Entwicklung auch
%%%          rausnehmen, um Zeit zu sparen beim Compilieren. Die zweite muss drin bleiben !!!!
%% plain: Gesamt-Bibliography zeigt Zahlen und ist unsortiert nach Autor/Jahr.

% Create two complete bibliographies with different styles
% (it seems: the last style set determines how the references in the text of the chapters look like)
\begin{bibunit}[babplain] %% Style not just plain! %% \begin{bibunit}[plain]
\nocite{*}
	\renewcommand{\bibname}{Literaturverzeichnis über alle Kapitel (nummeriert by babplain)}
\putbib[../de/references]
	\addcontentsline{toc}{chapter}{Literaturverzeichnis über alle Kapitel (nummeriert)}
\end{bibunit}


%% alpha: Gesamt-Bibliography zeigt Autorenkürzel und ist unsortiert nach Autor/Jahr.
%%        Da dies der letzte Bibliography-Aufruf ist, stehen im Quelltext auch die Autorenkürzel.
%% \begin{bibunit}[alpha]
\begin{bibunit}[babalpha]
\nocite{*}  %% Wenn auskommentiert, ist Ges.lit.verzeichnis leer und
            %% ("Label `Heninger2012' multiply defined"). Es kommen nur 18 statt 210
            %% Warnungen ("multiply defined references"). Warum noch 18?  Todo_LaTeX.
\renewcommand{\bibname}{Literaturverzeichnis über alle Kapitel (sortiert by babalpha)}
\putbib[../de/references]
\addcontentsline{toc}{chapter}{Literaturverzeichnis über alle Kapitel (sortiert nach AutorJahr)}
\end{bibunit}



%------------------------------------------------------------------------------
\clearpage\phantomsection
% In order to have a better overview in the index, used \see.
% So e.g. use only \index{CT1}, as "CrypTool 1" refers to it.
% - Info:
%   - http://tex.stackexchange.com/questions/86646/indexing-subentries-and-see-also
%     Per neu zu def \index also neue Zeile am Ende von Entry 1, das auf Entry 2 verweist.
%   - Um auf Subentry zu verweisen, muss man das Ziel anders schreiben: Also nicht
%     see{Fermat!letzter Satz}, sondern see{Fermat, letzter Satz}.
%     http://tex.stackexchange.com/questions/186019/makeindex-and-see-subentry
  \index{Primzerlegung|see{Faktorisierung}}

  \index{gpg|see{GnuPG}}
  \index{One-Time-Pad|see{OTP}}
  \index{PRNG|see{Zufallsgenerator}}
  \index{Pseudozufallsgenerator|see{Zufallsgenerator}}
  \index{Schlüsselaustausch!Diffie-Hellman|see{Diffie-Hellman}}
  \index{ECC|see{elliptische Kurve}}
  \index{Triple-DES|see{DES, Triple-DES}}

  \index{Fermat!großer Satz|see{Fermat, letzter Satz}}
  \index{Fermat!zweiter Satz|see{Fermat, letzter Satz}}
  \index{großer Satz|see{Fermat, letzter Satz}}
  \index{zweiter Satz|see{Fermat, letzter Satz}}
  \index{letzter Satz|see{Fermat, letzter Satz}}
  \index{kleiner Satz|see{Fermat, kleiner Satz}}

  % \index{MysteryTwister C3|see{MTC3}|see{Krypto-Wettbewerb}}  % Das geht nicht, zeigt nur "siehe MTC3".
  \index{MysteryTwister C3|see{MTC3}}
  % \index{MysteryTwister C3|see{Krypto-Wettbewerb}}  Raus, da zwei Verweise nicht schön, und vor allem
  %                 werden sie alphabetisch geordnet und nach "siehe Krypto-Wettbewerb" ist eine Blackbox.
  \index{Challenge|see{Krypto-Wettbewerb}}
  % \index{Cipher-Challenge|see{Krypto-Wettbewerb}}  Raus, führt trotz RaggedRight zu Balckbox.
  \index{CrypTool~1|see{CT1}}  %% So \index{CrypTool~1} is no more needed, only \index{CT1}.
  \index{CrypTool~2|see{CT2}}
  \index{JCrypTool|see{JCT}}
  \index{CrypTool-Online|see{CTO}}

  \index{Phi-Funktion|see{Eulersche Phi-Funktion}}
  \index{Fast Fourier Transformation|see{FFT}}
  \index{FSR|see{Schieberegister}}
  \index{rückgekoppeltes Schieberegister|see{Schieberegister}}
  \index{PQC|see{Post-Quantum-Computing}}
  
%% be_2016-08-04: Da es 4 blackboxes im Index gab (nur dt.)  ragged2e und RaggedRight eingeführt --> half.
%% Siehe: http://tex.stackexchange.com/questions/63006/overfull-hbox-from-printindex
%%        http://tex.stackexchange.com/questions/97196/how-to-avoid-bad-boxes-in-the-index
%%  - warning "overfull hbox". With the class option draft the overfull box is marked with an black box.
%%  \usepackage{index,lipsum,lmodern}
%%  \usepackage{ragged2e}
{              % start group
  \addcontentsline{toc}{chapter}{Index}
  \RaggedRight  % be_2016-08-04: left-justified setting w/ blackbox in index
  \printindex
}              % end group

\newpage %Nice-to-have-TODO_LaTeX_Doesn't seem to create an empty page at the end.
\newpage

\end{document}


