% $Id$
% ............................................................................
%        MAIN or STARTING file for this document
%
% Comments: - Add (lengthy) comments only into the German version!
%           - Add comments to the English version which refer only to English.
%
% Schreibregelung / Syntax rules / Writing rules / Notation in English:
%         - Chapter/Section header with all nouns/verbs capitalized.
%         - All other headers (incl. Section/Subsection) in the normal lower/upper case
%           manner like sentences, but without dot at the end.
%         - Use American English instead of British English consistently.
%
% Orthography English: - finite abelian group  --> "abelian" lower case.
%                      - a Boolean function --> till now always upper case [Boolean <--> abelian?]
%
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


\documentclass[a4paper,11pt,oneside]{book}
\overfullrule=5pt
\usepackage[latin1]{inputenc}
\usepackage[final]{microtype}%Loaded just because to avoid black boxes which appeared only in documentclass draft mode
\DeclareTextSymbolDefault{\dh}{T1}
\DeclareTextSymbolDefault{\textperthousand}{T1}

\usepackage[english]{babel} % Necessary only, because package babelbib was used.
\usepackage[fixlanguage]{babelbib} % E: per bibtex erzeugte Bibliography: edition: "1" --> "1st"
\selectbiblanguage{english}


\usepackage{datetime} % To distinguish often compiled draft versions

\setlength{\fboxrule}{.5mm}
\setlength{\fboxsep}{1.75mm}
\setlength{\footnotesep}{6pt}

\usepackage{amsmath}
\usepackage{amssymb,amscd,latexsym}   %BERM2: added for biciphers.tex
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{ae}%16xxxxxxxxxxxxxx Neu wegen dlog.tex
\usepackage{color}
\usepackage{wrapfig}%16xxxxxxxxxxxxxx WIRKLICH NOETIG?

\usepackage{tikz,tikz-cd} %16xxxxxxxxxxxxxx WIRKLICH NOETIG?
\usepackage{fancybox} %16xxxxxxxxxxxxxx

\usepackage{fancyvrb}
\usepackage{makeidx}
\usepackage{pdfpages}
\usepackage{paralist}
\usepackage{arydshln}
\usepackage{verse}

\usepackage[flushmargin]{footmisc}
\usepackage{fullpage}

\usepackage[hyphens]{url}%
\appto\UrlBreaks{\do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j
% \appto\UrlBreaks{\do\a\do\b\do\c\do\d\do\f\do\g\do\h\do\i\do\j
\do\k\do\l\do\m\do\n\do\o\do\p\do\q\do\r\do\s\do\t\do\u\do\v\do\w
\do\x\do\y\do\z}


\usepackage[]{bibunits}
\defaultbibliography{../de/references}


\usepackage{float}
\usepackage{subfig}
\usepackage{shorttoc}
\usepackage{wasysym}%Necessary for promille symbol in bitcipers.tex



% -------------
\usepackage[colorlinks=true,linkcolor=blue, citecolor=blue,urlcolor=black,bookmarksnumbered=true,pdfpagelabels,plainpages=false,hyperfootnotes=false]{hyperref}



\floatstyle{boxed}
\newfloat{ctsquotefloat}{H}{loq}
\floatname{ctsquotefloat}{Quote}
\newenvironment{ctsquote}{\begin{ctsquotefloat}\center}{\end{ctsquotefloat}}
\floatstyle{ruled}

\newfloat{sagecode}{!ht}{loc}[chapter]
\floatname{sagecode}{SageMath sample}

\newfloat{opensslcode}{!ht}{loos}[chapter]
\floatname{opensslcode}{OpenSSL sample}

\newfloat{cryptoprocedure}{!ht}{lop}[chapter]
\floatname{cryptoprocedure}{Crypto Procedure}


\RequirePackage[normalem]{ulem} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\RequirePackage{color}\definecolor{RED}{rgb}{1,0,0}\definecolor{BLUE}{rgb}{0,0,1} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFadd}[1]{{\protect\color{blue}\uwave{#1}}} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFdel}[1]{{\protect\color{red}\sout{#1}}}   %DIF PREAMBLE%16xxxxxxxxxxxxxx

\providecommand{\DIFaddbegin}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFaddend}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFdelbegin}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFdelend}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx

\providecommand{\DIFaddFL}[1]{\DIFadd{#1}} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFdelFL}[1]{\DIFdel{#1}} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFaddbeginFL}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFaddendFL}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFdelbeginFL}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx
\providecommand{\DIFdelendFL}{} %DIF PREAMBLE%16xxxxxxxxxxxxxx



\makeindex
\hypersetup{colorlinks=true}

%\newcommand{\href}[2]{#2}
\newcommand{\hypertag}[2]{#1} %%%%%% NUR im ENGLISCHEN ???
%\newcommand{\hyperlink}[2]{#2}
%\newcommand{\hypertarget}[2]{#2}

\newtheorem{definition}{Definition}[section]
\newtheorem{theorem}{Theorem}[section]
\renewenvironment{proof}[1]{\noindent\textbf{Proof #1} \\}{\hfill$\Box$\par}  %BERM: Instead of making AMS-Theorem a comment in order to have no redefinition of proof, used renewenvironment [proof used in moderncryptography.text, numbertheory.tex, and primes.text]. Necessary only in English!
\newenvironment{example}[1]{\noindent\textbf{Example#1}}{}
\newenvironment{remark}[1]{\noindent\textbf{Comment#1}}{}

\newenvironment{ Latex_Create-Closed-Dummy-Environ }{}{}

\setcounter{tocdepth}{4}
\setcounter{secnumdepth}{4}


% Define title ..............
\title{% Empty lines between these brackets cause: "Paragraph ended before \title was complete."
	{\Huge The CrypTool Book: \\[20pt]
         {\bf Learning and Experiencing\\[10pt] Cryptography\\[15pt]
          with CrypTool and SageMath}}\\[35pt]
	{\LARGE	Background reading for CrypTool\\ 
         the free e-learning crypto program \\[5pt]
	 (Cryptography, Mathematics, and More)} \\[35pt]
	% {\large 12th edition}
	 {\large 12th edition --  {\bf draft version} (\settimeformat{hhmmsstime}\currenttime)}
        \vspace{120pt}
}

\author{
        {\LARGE Prof.\ Bernhard Esslinger (co-author and editor)}\\[10pt]
        {\LARGE and the CrypTool Team, 1998-2017}\\[10pt]
        \url{www.cryptool.org}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

  \includepdf[pages=1]{figures/coverv1_en_draft.pdf}   % 100dpi
% \includepdf[pages=1]{figures/coverv1_en.pdf}   % 300dpi

\pagestyle{plain}
\tikzset{ampersand replacement=\&} %DIF > %16xxxxxxxxxxxxxx

\setlength{\fboxrule}{.5mm}
\setlength{\fboxsep}{1.75mm}
\setlength{\footnotesep}{6pt}
\addtolength{\footskip}{8pt}

\VerbatimFootnotes
\renewcommand\footnoterule{%
  \vspace{2em}
  \hrule width .4\columnwidth
 \vspace{4pt}
}


\frontmatter
\maketitle


\begin{quote}
This is a free document, so the content of the document can
be copied and distributed, also for commercial purposes --- as long as
the authors, title and the CrypTool web site (\url{www.cryptool.org})
are acknowledged. Naturally, citations from the CrypTool book are
possible, as in all other documents.\\
Additionally, this document is liable to the specific license of the
GNU Free Documentation Licence.

    Copyright \copyright{} 1998--2017 Bernhard Esslinger and the
    CrypTool Team. Permission is granted to copy,
    distribute and/or modify this document under the terms of the GNU
    Free Documentation License, Version 1.3 or any later version
    published by the Free Software Foundation. A copy of
    the license is included in the section entitled
    \hyperlink{appendix-GNU-fdl}{``GNU Free Documentation License''}.

    This also includes the code of the SageMath samples in this document.
\end{quote}


\vspace{70pt}\noindent Suggestion for referencing with bibtex:
\begin{Verbatim}%
[fontsize=\footnotesize]
@book{Esslinger:ctb_2017,
  editor    = {Bernhard Esslinger},
  title     = {{L}earning and {E}xperiencing {C}ryptography
               with {C}ryp{T}ool and {S}age{M}ath},
  publisher = {CrypTool Project},
  edition   = {12},
  year      = {2017}
}
\end{Verbatim}


\vspace{250pt}
\noindent
Source cover photograph: \url{www.photocase.com}, Andre Guenther\\
Typesetting software: \LaTeX\\
Version control software: Subversion


\input{chapters/overviewcontent.tex}


\newpage
\pdfbookmark[0]{Contents Overview}{ShortContents}
\shorttoc{Contents Overview}{0}
\clearpage\phantomsection
\pdfbookmark[0]{\contentsname}{Contents}
\tableofcontents 

\newpage
\normalsize

\newcounter{mycounterDefaultParskip}
\setcounter{mycounterDefaultParskip}{4}
\parskip \value{mycounterDefaultParskip} pt 


\renewcommand{\bibname}{Bibliography \CTBChapName{}}
\newcommand{\CTBChapName}{(Chap Intro)}           \input{chapters/introduction.tex}
\mainmatter
\renewcommand{\CTBChapName}{(Chap CryptoMeth)}    \input{chapters/cryptomethods.tex}
\renewcommand{\CTBChapName}{(Chap PaP)}           \input{chapters/paper_and_pencil.tex}
\renewcommand{\CTBChapName}{(Chap Primes)}        \input{chapters/primes.tex}
\renewcommand{\CTBChapName}{(Chap NT)}            \input{chapters/numbertheory.tex}
\renewcommand{\CTBChapName}{(Chap ModernCrypto)}  \input{chapters/moderncryptography.tex}
\renewcommand{\CTBChapName}{(Chap DigSig)}        \input{chapters/digitalsignatures.tex}
\renewcommand{\CTBChapName}{(Chap EllCurves)}     \input{chapters/ellipticcurves.tex}
\renewcommand{\CTBChapName}{(Chap BitCiphers)}    \input{chapters/bitciphers.tex}
\renewcommand{\CTBChapName}{(Chap HE)}            \input{chapters/homomorphicencryption.tex}
\renewcommand{\CTBChapName}{(Chap DLogFact)}      \input{chapters/dlog-factoringdead.tex}
\renewcommand{\CTBChapName}{(Chap Crypto2020)}    \input{chapters/crypto2020.tex}



% ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\begin{appendix}
\newpage
\hypertarget{appendix-start}{}\label{s:appendix-start}
\chapter{Appendix}
    \begin{itemize}
      \item[1] \hyperlink{appendix-menu-overview-CT1}{CrypTool~1 Menu Tree}
      \item[2] \hyperlink{appendix-template-overview-CT2}{CrypTool~2 Templates}
      \item[3] \hyperlink{appendix-function-overview-JCT}{JCrypTool Functions}
      \item[4] \hyperlink{appendix-function-overview-CTO}{CrypTool-Online Functions}
      \item[5] \hyperlink{appendix-movies}{Bibliography of Movies and
                          Fictional Literature with Relation to Cryptography}
      \item[6] \hyperlink{appendix-Learn-NT}
                         {Learning Tool for Elementary Number Theory}
      \item[7] \hyperlink{appendix-using-sage}
                         {Short Introduction into the Computer Algebra System SageMath}
      \item[8] \hyperlink{appendix-authors}{Authors of the CrypTool Book}
    \end{itemize}
  \newpage
  \renewcommand{\CTBChapName}{(Appendix Menus)}      \input{chapters/menus.tex}
  \renewcommand{\CTBChapName}{(Appendix LearnTool)}  \input{chapters/movies.tex}
  \renewcommand{\CTBChapName}{(Appendix Sage)}       \input{chapters/what-is-sage.tex}
  \renewcommand{\CTBChapName}{(Appendix Authors)}    \input{chapters/authors.tex}
\end{appendix}

\renewcommand{\CTBChapName}{(Appendix gnu-fdl)}      \input{chapters/gnu-fdl-1.3.tex}


% ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\begingroup
  \renewcommand*{\addvspace}[1]{}

  \clearpage\phantomsection
  \addcontentsline{toc}{chapter}{\listfigurename}
  \listoffigures

  \clearpage\phantomsection
  \addcontentsline{toc}{chapter}{\listtablename}
  \listoftables

  \clearpage\phantomsection
  \addcontentsline{toc}{chapter}{List of Crypto Procedures with Pseudo Code}
  \listof{cryptoprocedure}{List of Crypto Procedures with Pseudo Code}
\endgroup


\clearpage\phantomsection
\addcontentsline{toc}{chapter}{List of Quotes}
\listof{ctsquotefloat}{List of Quotes}
\index{Quotes}
\label{sc:List-of-Quotes}


\clearpage\phantomsection
\addcontentsline{toc}{chapter}{List of OpenSSL Examples}
\listof{opensslcode}{List of OpenSSL Examples}
\index{OpenSSL!sample}
\label{sc:List-of-OpenSSL-Code-Examples}


\clearpage\phantomsection
\addcontentsline{toc}{chapter}{List of SageMath Code Examples}
\listof{sagecode}{List of SageMath Code Examples}
\index{SageMath!code examples}
\label{sc:List-of-Sage-Code-Examples}

\vspace{30pt}
\begin{itemize}
  \item The source code of the SageMath samples in this script is delivered as
        SageMath program files within the CT1 setup program.
        All samples within one chapter are collected in one file.
        After installing CrypTool~1 \index{CT1} you find
        the SageMath samples within the subdirectory \verb#sagemath# in the
        following 4 files:
        - SageMath-Samples-in-Chap01.sage \\
        - SageMath-Samples-in-Chap02.sage \\
        - SageMath-Samples-in-Chap03.sage \\
        - SageMath-Samples-in-Chap04.sage
  \item All samples have been tested with SageMath Version 5.3 (Release Date 2012-09-08).
\end{itemize}   % xxxxxxxxxxxxxx Weitere Beispiele ergänzen !  % TODOTODO: Update.



%------------------------------------------------------------------------------
% Create two complete bibliographies with different styles
\begin{bibunit}[babplain] %% Style not just plain!
\nocite{*}
\renewcommand{\bibname}{All References from All Chapters (numbered by babplain)}
\putbib[../de/references]
\addcontentsline{toc}{chapter}{Bibliography with All References (Numbered)}
\end{bibunit}


\begin{bibunit}[babalpha]
\nocite{*}
\renewcommand{\bibname}{All References from All Chapters (sorted by babalpha)}
\putbib[../de/references]
\addcontentsline{toc}{chapter}{Bibliography with All References (Sorted by AuthorYear)}
\end{bibunit}


%------------------------------------------------------------------------------
\clearpage\phantomsection
  \index{BSI|see{GISA}}
  \index{gpg|see{GnuPG}}
  \index{one-time pad|see{OTP}}
  \index{PRNG|see{random generator}}
  \index{pseudo-random generator|see{random generator}}
  \index{key agreement (key exchange)!Diffie-Hellman|see{Diffie-Hellman}}
  \index{ECC|see{elliptic curve}}
  \index{Triple-DES|see{DES, Triple-DES}}

  \index{Fermat!big theorem|see{Fermat, last theorem}}
  \index{Fermat!second theorem|see{Fermat, last theorem}}
  \index{big theorem|see{Fermat, last theorem}}
  \index{second theorem|see{Fermat, last theorem}}
  \index{last theorem|see{Fermat, last theorem}}
  \index{little theorem|see{Fermat, little theorem}}

  \index{MysteryTwister C3|see{MTC3}}
  \index{MysteryTwister C3|see{crypto challenge}}
  \index{challenge|see{crypto challenge}}
  \index{cipher challenge|see{crypto challenge}}
  \index{CrypTool~1|see{CT1}}
  \index{CrypTool~2|see{CT2}}
  \index{JCrypTool|see{JCT}}
  \index{CrypTool-Online|see{CTO}}

  \index{phi function|see{Euler, (phi) function}}
  \index{Fast Fourier Transformation|see{FFT}}
  \index{FSR|see{feedback shift register}}
  \index{shift register|see{feedback shift register}}
  \index{linear feedback shift register|see{LFSR}}
  \index{PQC|see{post-quantum computing}}
\addcontentsline{toc}{chapter}{Index}
\printindex

\newpage
\newpage

\end{document}

