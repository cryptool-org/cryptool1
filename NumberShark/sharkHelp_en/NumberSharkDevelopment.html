<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<meta name="GENERATOR" content="Microsoft&reg; HTML Help Workshop 4.1">
<Title>Development</Title>
<link rel="stylesheet" type="text/css" href="CrypTool_Help.css">
</HEAD>
<BODY>
<h3><P><A NAME="development"></A><B>Development of the game</B></P></h3>

<p>The idea for the Number Shark game comes from Mr. Lothar Carl, who created the original version of 
the game in Delphi. The Number Shark game is used to improve and to train the knowledge of factors and 
prime numbers in grades six to ten.</p>

<p>The original program from Mr. Carl was freeware, but not open source:<br>
<a href="http://www.learn-line.nrw.de/angebote/neuemedien/medio/mathe/coalgebr/zahlhai/hai01.htm" target="_blank">http://www.learn-line.nrw.de/angebote/neuemedien/medio/mathe/coalgebr/zahlhai/hai01.htm</a></P>

<P>You can find the maximum amount of points possible for numbers up to n=50 on Mr. Carl's site. 
However, these values were created while playing, so the results are subject to change (the last 
change dates back to 10/12/2000).</p>

<P>Mr. Carl kindly allowed us to use his ideas and the name for a new implementation. The following 
picture shows the original version of the Number Shark (German version):</p>

<IMG SRC="Pictures_en/game_original_de.png" ALT="game_original_de.png" BORDER=0>

<IMG SRC="Pictures_en/hai.gif" ALT="hai.gif" BORDER=0>

<P>The new version of the Number Shark is freeware and open source.</P>

<P>In the English speaking world this game idea is called "tax man" significantly.</P>

<P>The site <a href="http://www.research.att.com/~njas/sequences/A019312" target="_blank">http://www.research.att.com/~njas/sequences/A019312</a> 
within <b>ATT Integer Sequences</b> contains the maximum amount of points possible up to n=158. The 
sequence can be displayed there graphically, too. Meanwhile, for each n the ideal way is stated too in 
the notes (thanks to Dan Hoey). A formula for the ideal value is not known as of now, though.</P>

<P>For big values of n, all known methods to calculate the ideal way need <B>very</B> long. The new 
JavaCrypTool contains heuristic methods that find good - but not necessarily ideal - ways. These 
methods are very fast.</P>

<P>(Status February 2010)</P>
	

<p><b><u>1. Learning to program</u></b></p>

<p>Within the first year of the apprenticeship as an IT specialist, the idea of Mr. Carl was chosen as a sample to teach programming skills in C++ and to expand them by upgrading the program step by step.</p>

<p>At first the Number Shark procedure was implemented as a console program (Console programs can only do text in- and output. They are started from a command line: You can find the command line in Windows via: Start \ Programs \ Accessroies \ Command Prompt). The command line version of the program was only developed in German.</p>

<p><IMG SRC="Pictures_en/console_de.png" ALT="console_de.png" BORDER=0 width="91%"></p>

<p>After the logic for the algorithm was implemented, we created a graphical user interface.</p>

<p>After that, the program was continually expanded: <a name="Buttons">The</a> first add-on was to give the player the possibility to play with more than 50 numbers (this was the maximum in the original game of Mr. Carl). In order to do this we created a tab control on which 30 buttons are placed. These buttons change their value and label depending on which tab you choose.<br>
Now you can play with maximum 9999 numbers. This border is set in the source code because the current buttons are not wide enough for bigger numbers and it would make no sense to play with a higher number because it will get too difficult to know all numbers and all factors.</p>
<p>The game dialog and all parts of it have a fixed size. We would have liked to make the size of the dialog variable, but unfortunately the resource editors in Visual C++ 6.0 and Visual C++ 7.1 (Visual Studio 2003) don't give us the possibility of the so called "docking" of graphical elements onto the dialog windows. The width of the columns in the game progress list can be changed in their width, so that the player can see all points that the Number Shark was awarded in every round. If the new content is broader then the current column, the width will not be adjusted automatically. To make the size scalable would be a good task for a future version using the Windows 7 graphics engine WPF (see <a href="#TODOLIST">TODO #16</a>).</p>

<p><IMG SRC="Pictures_en/Dlg_limit_en.png" ALT=Dlg_limit_en.png" BORDER=0 width="91%"></p>

<p><b><u>2. Maximum possible points</u></b></p>

<p>During the test phase, we asked ourselves how many points a player can score. To answer this 
question, a function which calculates the maximum possible score was written. After pressing the 
<b>Start</b> button in the "Game options" dialog (flag "Maximum score"), you can choose from two 
different algorithms:</p>

<p><B>Brute-force algorithm</B>: <a name="Calculation">This</a> algorithm calculates every possible 
move order and compares the achieved scores (brute-force).</P>

<P><B>Back-tracking algorithm</B>: This algorithm is using trial and error to assemble partial solutions 
to a wholistic solution. You can find further information on backtracking 
<a href="http://de.wikipedia.org/wiki/Backtracking" target="_blank">here</a>.</P>

<P>After choosing the algorithm, you get:</P>

<ul>
	<li>the highest possible score,</li>
	<li>the time the program needed to calculate this score,</li>
	<li>the amount of steps the program had to go through to achieve this score,</li>
	<li>the highest prime number (you should choose this number first in a game) and</li>
	<li>a numerical sequence to achieve the maximum possible score.</li>
</ul>
</p>

<p><IMG SRC="Pictures_en/Dlg_options4_en.PNG" ALT="Dlg_options4_en.PNG" BORDER=0 width="91%"></p>

<p>Because this calculation takes a long time, the player is asked by the program before the calculation starts.</p>

<p><IMG SRC="Pictures_en/Dlg_max_warn_en.png" ALT="Dlg_max_warn_en.png" BORDER=0 width="91%"></p>

<p><IMG SRC="Pictures_en/Dlg_max_value_en.png" ALT="Dlg_max_value_en.png" BORDER=0 width="91%"></p>

<p><u><b>Remark</b></u>:</p>

<p>The maximum possible points are already available for numbers from 1 to 158 and are saved in the 
file "GameData.txt", so that they don't need to be calculated again and can be displayed right away.</p>

<p><IMG SRC="Pictures_en/Dlg_max_old_en.png" ALT="Dlg_max_old_en.png" BORDER=0 width="91%"></p>

<p>And the program can show you one optimal way to achieve this score. (i.e. in which way you should 
take the numbers)</p>

<p><IMG SRC="Pictures_en/Dlg_max_way_en.png" ALT="Dlg_max_way_en.png" BORDER=0 width="91%"></p>


<p><b><u>3. Stop and restart the calculation</u></b></p>
<p>Because calculating the highest possible score for bigger numbers lasted very long with our brute-force algorithm, we had to find a way to stop and restart the calculation because the PC may have to be used for other work or may have a power breakdown. Therefore, intermediate results are saved in a document in short time intervals. The file "NumberSharkSearch[amount of numbers] is created in the same folder as the Number Shark executable and can be opened with a normal text editor. </p> 

<p><IMG SRC="Pictures_en/game_max_calc.png" ALT="game_max_calc.png" BORDER=0 width="91%"></p>

<p>When you start a new calculation the program first looks if an intermediate result for this number already exists. If yes, then the calculation starts at the same position where the former one stopped. Even without any knowledge of the content of this file or how the calculation works, you can, if you have a fast PC with a lot of idle time, calculate new values on your own.</p>

<p>For numbers &gt; 158 we need your help: see <a href="NumberSharkChallenge.html">Challenge</a>. We have precalculated and saved the maximum possible points, and one of the best ways to get these points for numbers &lt; 158 in our program. If you reach the highest possible score and an optimal way with numbers &gt; 158 then we would be pleased if you could send us your results to esslinger@fb5.uni-siegen.de.</p>

<p><b><u>4. Program control</u></b></p>
<p>a) Choose a number in the shell square<br><br>
To increase the usability in the program, we added a keyboard control. Now you can move over the shells and the tabs with the arrow keys (left, right, up, down). In previous versions you could only use the left and right arrow key, the tab key and the space bar to activate the buttons. Now you can select the shells with the <b>Enter</b>- or the <b>Space</b> Button.</p>
<p>b) Undo and redo the rounds you played<br>
The Number Shark game has a feature to undo <IMG SRC="Pictures_en/Dlg_main_undo.png" ALT="Dlg_main_undo.png" BORDER=0> your previous played rounds if you want to choose another number. And you can redo <IMG SRC="Pictures_en/Dlg_main_redo.png" ALT="Dlg_main_redo.png" BORDER=0> these steps as long as you change nothing in the course of the game.</p>

<p><b><u>5. Tests</u></b></p>

<p>In addition to some colleagues from the branch and some apprentices, there were also users on the internet involved in testing the game. Some of the suggestions that we received because of these tests were the tool tips, the keyboard control and stopping and restarting of the calculation.</p>

<p><b><u>6. Visual appearance</u></b></p>

<p>To make the program look more like a game and less like a normal office application we needed to change the visual appearance of the game. The first step was to change the look of the buttons in the shell square. To realize this, we created a picture of a shell for every condition of a button (pressed, activated, has focus, deactivated) and placed it over the button. The buttons are transparent, to make the buttons look like the borders of the shell are the borders of the buttons.</p>
<p>Whenever you want you can switch between the normal button and the shell button look by pressing <b>SHIFT+ALT+C</b> on your keyboard. This will make the shells in the shell square visible or invisible.</p>
<p>Different pictures of a shark were added to the dialog, and every time you press the <b>New game</b>button the picture changes.</p>
<p>Then the normal tool tips were replaced by so called balloon tips.</p>
<p>Other visual changes are the different colors on the game progress list and a LED display which shows you the scores and the end results.</p>

<P>The options were split on the sliders <B>Welcome</B>, <B>Standard</B> and <B>Maximum score</B>, so that different types of options are separated. Later, you'll be able to chose colors for the table and the fonts via the slider <B>Colors</B> which is similar to MS Paint (see <a href="#TODOLIST">TODO #5</a>).</P>

<p>The design of the buttons in the numbers stack, the LED display and the colored course of the game were realized with the help of source code examples from the users of the website <a href="http://www.codeproject.com" target="_blank">http://www.codeproject.com</a>. 



<p>After the game dialog was finished we realized that the game was too big for smaller pc screens and resolutions. To solve this problem we decided to create a new, smaller, game dialog. In this dialog you can only see 20 button shells at one time and the game progress list was shortened.</p>


<p><a name="TODOLIST"></a><b><u>7. TODOs</u> - How the program can be improved</b></p>

<p>Of course the program is not completed yet. More ideas are:
<ol type=1>
	<li>Another big task is to make the algorithm for the maximum possible points and the best way to achieve them faster (see <a href="NumberSharkChallenge.html">challenge</a>).<br>
	Initial progress was made with the backtracking algorithm, that was provided by Dr. Jens Liebehenschel 
	(metio GmbH).</li>
	<li>And there are many ways to make the game look more like a game for kids.</li>
	<li>If the mouse pointer moves over a shell that is still active, the blue ones, it should change it appearance to a hand for example.</li>
	<li>The numbers disappear in the shells (shells need to be animated).</li>
	<li>A color selection similar to Paint where the player can change the text colors for example.</li>
	<li>A slider control to select the size of the shell square (already implemented in JavaCrypTool).</li>
	<li>Show a high score list for all users.</li>
	<li>The player should have the possibility to decide buttons he wants to see on the shell square (20, 30 or 40).</li>
	<li>Because the width of the rows can be changed manually, in the game progress list, there need to be a way to set them back to their default width.</li>
	<li>One more idea is to switch the roles of the player and the Number Shark.</li>
	<li>It should be possible to copy the lines from the course of the game to another document.</li>
	<li>Allow the Number Shark to be called from the command line (as batch) with all necessary parameters (name, number of shells, order of numbers, name of output file). So you could find out, what score can be achieved by randomly pushing the shells, and the program could directly process a user-chosen number sequence.</li>
	<li>Another idea could be to offer a set of numbers like 5 to n instead of 1 to n (change the lowest possible value).</li>
	<li>When you calculate new score for numbers &gt; 158 via brute-force it should be possible to
	<ol type = "a">
		<li>abort this task (multithreading)</li>
		<li>play the game while a new value is calculated</li>
		<li>read the already achieved values out of the *.zha file</li>
	</ol>
	</li>
	<li>A save and load function would also be a good idea (already implemented for the brute-force algorithm).</li>
	<li>Port the Number Shark to WPF and make the dialogs sizable (docking).</li>
	<LI>Implement a function that distributes the shark food numbers without any user interaction.</LI>
</ol>
</p>

<p>You can find general information about the interface <a href="NumberShark.html">here</a>, hints for the game are available <a href="NumberSharkTutorial.html">here</a>.</p>

<p>By legal reasons we explicitly have to point at the <a href="NumberSharkLicense.html">terms of license and the information regarding non-liability</a>.</p>

</BODY>
</HTML>
